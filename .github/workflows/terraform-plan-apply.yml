# ARCHIVED: This workflow has been split into separate plan and apply workflows
# - terraform-plan.yml: For plan-only on PRs
# - terraform-apply.yml: For plan+apply on main branch pushes with auto branch cleanup
#
# This file is kept for reference but is no longer active.
# You can delete this file after confirming the new workflows work correctly.

name: "[ARCHIVED] Terraform Plan & Deploy"

# DISABLED: This workflow has been replaced by terraform-plan.yml and terraform-apply.yml
# All triggers have been commented out to prevent execution

# on:
#   push:
#     branches: [main]
#     paths:
#       - 'terraform/aws/overlay/**'
#       - '.github/workflows/**'
#       - '.github/actions/**'
#   
#   pull_request:
#     branches: [main]
#     paths:
#       - 'terraform/aws/overlay/**'
#       - '.github/workflows/**'
#       - '.github/actions/**'
#   
#   workflow_dispatch:
#     inputs:
#       environments:
#         description: 'Environments to target (comma-separated: dev,staging,prod or "all")'
#         required: true
#         default: 'dev'
#         type: string
#       action:
#         description: 'Action to perform'
#         required: true
#         default: 'plan'
#         type: choice
#         options:
#           - plan
#           - apply
#           - plan-and-apply
#       force_all_environments:
#         description: 'Run for all environments regardless of changes'
#         required: false
#         default: false
#         type: boolean

# ARCHIVED: All workflow content below has been commented out since this workflow is no longer active
# The workflow has been replaced by terraform-plan.yml and terraform-apply.yml

# permissions:
#   id-token: write
#   contents: read
#   pull-requests: write
#   issues: write
#   checks: write

# env:
#   AWS_REGION: us-east-2
#   TF_VERSION: "1.8.0"

# concurrency:
#   group: terraform-${{ github.workflow }}-${{ github.ref }}
#   cancel-in-progress: ${{ github.event_name == 'pull_request' }}

# jobs:
#   detect-changes:
#     name: "üîç Detect Changes"
#     runs-on: ubuntu-latest
#     outputs:
#       matrix: ${{ steps.get-changes.outputs.matrix }}
#       has_changes: ${{ steps.get-changes.outputs.has_changes }}
#       environments: ${{ steps.get-changes.outputs.environments }}
#     
#     steps:
#       - name: üì• Checkout repository
#         uses: actions/checkout@v4
#         with:
#           fetch-depth: 0
#       
#       - name: üéØ Get changed Terraform directories
#       id: get-changes
#       uses: ./.github/actions/tf-matrix
#       with:
#         filter: terraform/aws/overlay/**
#     
#     - name: üõ†Ô∏è Handle manual workflow dispatch
# ... [All remaining workflow content has been commented out]
# ... [This archived workflow contained terraform-plan, terraform-apply, and notify-completion jobs]
# ... [The full workflow definition is preserved in git history]
# ... [Use terraform-plan.yml and terraform-apply.yml for active workflows]

# End of archived workflow file